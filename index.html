<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gold Trading Dashboard</title>

<style>

body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#ffffff;
    color:#000000;
}

header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:15px 25px;
    border-bottom:2px solid #ddd;
}

h1{
    margin:0;
    color:#b8860b;
}

#timer{
    font-weight:bold;
    font-size:16px;
}

.price{
    text-align:center;
    font-size:22px;
    margin:15px 0;
    color:#006400;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
    gap:15px;
    padding:20px;
}

.card{
    background:#f9f9f9;
    border:1px solid #ccc;
    border-radius:8px;
    padding:12px;
    min-height:280px;
    overflow:auto;
}

.card h2{
    text-align:center;
}

.item{
    border-bottom:1px solid #ddd;
    padding:8px 0;
}

.item a{
    color:#0056b3;
    text-decoration:none;
}

.item a:hover{
    text-decoration:underline;
}

footer{
    text-align:center;
    padding:15px;
    color:#555;
    font-size:14px;
}

</style>
</head>

<body>

<header>
<h1>ğŸŸ¡ Gold Trading Live Dashboard</h1>
<div id="timer">Refresh in: 60s</div>
</header>

<div class="price" id="goldPrice">Loading Gold Price...</div>

<div class="grid">

<div class="card" id="economic">
<h2>ğŸ“Š Economic News</h2>
<div class="content"></div>
</div>

<div class="card" id="central">
<h2>ğŸ¦ Central Banks</h2>
<div class="content"></div>
</div>

<div class="card" id="usd">
<h2>ğŸ’µ US Dollar</h2>
<div class="content"></div>
</div>

<div class="card" id="geo">
<h2>ğŸŒ Geopolitics</h2>
<div class="content"></div>
</div>

<div class="card" id="sentiment">
<h2>ğŸ“‰ Market Sentiment</h2>
<div class="content"></div>
</div>

<div class="card" id="commodities">
<h2>ğŸ›¢ï¸ Commodities</h2>
<div class="content"></div>
</div>

<div class="card" id="technical">
<h2>ğŸ“ˆ Technical Analysis</h2>
<div class="content"></div>
</div>

<div class="card" id="calendar">
<h2>ğŸ• Economic Calendar</h2>
<div class="content"></div>
</div>

</div>

<footer>
Auto refresh every 1 minute | Powered by Cloudflare
</footer>

<script>

// ================= WORKER URL =================

const WORKER = "https://gold-proxy.abhi-koiri.workers.dev";

// ================= TIMER =================

let seconds = 60;

function startTimer(){

    setInterval(()=>{

        seconds--;

        document.getElementById("timer").innerText =
        "Refresh in: " + seconds + "s";

        if(seconds <= 0){
            seconds = 60;
            loadAll();
        }

    },1000);

}

// ================= NEWS =================

async function loadNews(query,id){

let url = `${WORKER}/news?q=${query}`;

let box = document.querySelector(`#${id} .content`);

try{

let res = await fetch(url);
let data = await res.json();

box.innerHTML="";

data.articles.slice(0,5).forEach(n=>{

let div=document.createElement("div");
div.className="item";

div.innerHTML=`
<b>${n.title}</b><br>
<a href="${n.url}" target="_blank">Read</a>
`;

box.appendChild(div);

});

}catch{

box.innerHTML="Failed to load";

}

}

// ================= GOLD =================

async function loadGold(){

let url = `${WORKER}/gold`;

try{

let res = await fetch(url);
let data = await res.json();

let price =
data["Realtime Currency Exchange Rate"]["5. Exchange Rate"];

document.getElementById("goldPrice").innerHTML =
"Live Gold Price (XAU/USD): $" + Number(price).toFixed(2);

}catch{

document.getElementById("goldPrice").innerHTML =
"Gold price unavailable";

}

}

// ================= CALENDAR =================

async function loadCalendar(){

let url = `${WORKER}/calendar`;

let box=document.querySelector("#calendar .content");

try{

let res = await fetch(url);
let data = await res.json();

box.innerHTML="";

data.economicCalendar.slice(0,5).forEach(e=>{

let div=document.createElement("div");
div.className="item";

div.innerHTML=`
<b>${e.event}</b><br>
${e.country} | ${e.time}
`;

box.appendChild(div);

});

}catch{

box.innerHTML="Calendar unavailable";

}

}

// ================= LOAD ALL =================

function loadAll(){

loadNews("US inflation CPI GDP economy","economic");
loadNews("Federal Reserve ECB interest rate","central");
loadNews("US dollar DXY forex","usd");
loadNews("war conflict geopolitics","geo");
loadNews("stock market crash volatility VIX","sentiment");
loadNews("gold oil commodity prices","commodities");
loadNews("gold technical analysis support resistance","technical");

loadGold();
loadCalendar();

}

// ================= START =================

loadAll();
startTimer();

</script>

</body>
</html>
